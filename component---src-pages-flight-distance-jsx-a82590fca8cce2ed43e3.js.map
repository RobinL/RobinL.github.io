{"version":3,"sources":["webpack://gatsby-starter-hello-world/./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","webpack://gatsby-starter-hello-world/./src/components/mdx_obs_page.jsx","webpack://gatsby-starter-hello-world/./node_modules/@robinl/flight-distance-calculator/65265a2092377a48@68.js","webpack://gatsby-starter-hello-world/./node_modules/@robinl/flight-distance-calculator/35510f059fbb566b@520.js","webpack://gatsby-starter-hello-world/./node_modules/@robinl/flight-distance-calculator/cf52e2d16b5b9cbe@1090.js","webpack://gatsby-starter-hello-world/./src/pages/flight_distance.jsx"],"names":["_taggedTemplateLiteral","strings","raw","slice","Object","freeze","defineProperties","value","props","post","define","output_order","children","css","className","title","post_frontmatter","description","_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","_templateObject15","_templateObject16","_templateObject17","_templateObject18","_templateObject19","_templateObject20","_templateObject21","_templateObject22","_templateObject23","_templateObject24","_templateObject25","runtime","observer","main","module","variable","md","DOM","width","height","d3","projection","sphere","land","resample","drag","routes","context","context2d","path","geoPath","colour_scale","scaleSequential","interpolateOrRd","domain","extent","d","render","clearRect","beginPath","fillStyle","fill","stroke","forEach","coordinates","resampled","mid_point_with_drift","route","type","lineWidth","lineO","strokeStyle","select","canvas","call","on","node","require","json","topojson","world","feature","objects","versor","v0","q0","r0","cartesian","invert","mouse","this","rotate","v1","q1","multiply","delta","rotation","geoEqualEarth","fitExtent","translate","precision","i","n","length","before","after","c0","c1","p0","p1","x10","y10","d1","push","c2","geoInterpolate","p2","x20","y20","dz","t","opinionPolls","JSON","stringify","table","titanicData","html","sortable","columns","Fare","formatter","val","format","Name","parts","match","spotify","rank","style","Track","Streams","defaultOptions","th","identity","data","options","_options","assign","paged","sortKey","undefined","sortDirection","page","Error","keys","map","key","opts","bake","sort","a","b","as","bs","localeCompare","res","rows","pages","Math","ceil","header","c","row","displayValue","window","HTMLElement","tagName","Array","from","_","dom","rerender","firstChild","remove","appendChild","addEventListener","e","target","dataset","action","parseInt","kenyaData","method","percent","name","elem","dispatchEvent","CustomEvent","elected","approval","color","scaleLinear","range","G","input","sortIndicator","arrow","displayedTitle","_ref","_callee","FileAttachment","_context","prev","next","t0","url","t1","sent","abrupt","csv","stop","_x","_x2","apply","arguments","spotifyCharts","csvParse","_ref2","Age","get_icao_from_value","dep_box","arr_box","add_to_list","reset_list","empty_inputs","switch_inputs","div","onclick","dep_value","arr_value","dval","flights_list","airports_icao_dict","get","data_for_table","fmt_num","total_flight_miles","fmt_num_round","total_energy_usage","tonnes_co2","selected_airports","getDistanceFromLatLonInMiles","airport0","airport1","new_dict","_i","_Object$entries","entries","_Object$entries$_i","_i2","_Object$entries2","_Object$entries2$_i","_key","_value","lat1","lng1","lat2","lng2","selected_airports_with_distances","to","miles","csvFormat","serialize","download","Files","upload","$0","text","_x3","_x4","chart","sum","distance","eu","flying","flying_miles_to_kwh","kwh","convert","per","kwh_to_kg_co2","child1","import","child2","Blob","lon1","lon2","deg2rad","deg","PI","dLat","dLon","sin","cos","atan2","sqrt","then","t2","autoType","airports","Map","icao","concat","city","country","iata","exec","frontmatter","post_date","code_url","post_type","post_category"],"mappings":"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","file":"component---src-pages-flight-distance-jsx-a82590fca8cce2ed43e3.js","sourcesContent":["export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","import React from 'react'\nimport Layout from \"../layouts/layout\"\nimport ObeservableNotebookDiv from \"./observable_div\"\nimport PostFrontMatter from \"./post_frontmatter\"\nimport SEO from \"../components/seo\"\n\nfunction ObsMdxPage(props) {\n\n\n  let post\n\n  if (props.define) {\n    post = <ObeservableNotebookDiv define={props.define} output_order={props.output_order} />\n  } else {\n    post = props.children\n  }\n\n  return (\n    <Layout css={props.className}>\n      <SEO title={props.post_frontmatter.title} description={props.post_frontmatter.description} />\n      <PostFrontMatter post_frontmatter={props.post_frontmatter} />\n      {post}\n    </Layout>\n  )\n\n}\n\nexport default ObsMdxPage","import _taggedTemplateLiteral from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\n// https://observablehq.com/@robinl/flights-globe-chart-function@68\nexport default function define(runtime, observer) {\n  var main = runtime.module();\n  main.variable(observer()).define([\"md\"], function (md) {\n    return md(_templateObject || (_templateObject = _taggedTemplateLiteral([\"# Flights globe chart function\"])));\n  });\n  main.variable(observer(\"chart\")).define(\"chart\", [\"DOM\", \"width\", \"height\", \"d3\", \"projection\", \"sphere\", \"land\", \"resample\", \"drag\"], function (DOM, width, height, d3, projection, sphere, land, resample, drag) {\n    return function (routes) {\n      var context = DOM.context2d(width, height);\n      var path = d3.geoPath(projection, context);\n      var colour_scale = d3.scaleSequential(d3.interpolateOrRd).domain(d3.extent(routes, function (d) {\n        return d[\"distance\"];\n      }));\n\n      function render() {\n        context.clearRect(0, 0, width, height);\n        context.beginPath(), path(sphere), context.fillStyle = \"#fff\", context.fill();\n        context.beginPath(), path(land), context.fillStyle = \"#000\", context.fill();\n        context.beginPath(), path(sphere), context.stroke();\n        routes.forEach(function (d) {\n          var coordinates = [[d[\"lng_from\"], d[\"lat_from\"]], [d[\"lng_to\"], d[\"lat_to\"]]];\n          var resampled = resample(coordinates);\n          var mid_point_with_drift = [resampled[\"after\"][1][0] + (d[\"lat_from\"] + d[\"lng_to\"]) / 100, resampled[\"after\"][1][1] + (d[\"lat_from\"] + d[\"lng_to\"]) / 100];\n          resampled[\"after\"][1] = mid_point_with_drift;\n          var route = {\n            type: \"LineString\",\n            coordinates: resampled[\"after\"]\n          };\n          context.lineWidth = 1.5;\n          context.lineO;\n          context.beginPath(), path(route), context.strokeStyle = colour_scale(d[\"distance\"]), context.stroke();\n        });\n        context.lineWidth = 1;\n        context.strokeStyle = \"#000000\";\n      }\n\n      return d3.select(context.canvas).call(drag(projection).on(\"drag.render\", render)).call(render).node();\n    };\n  });\n  main.variable(observer()).define([\"md\"], function (md) {\n    return md(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"Imports\"])));\n  });\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], function (require) {\n    return require(\"d3@5\");\n  });\n  main.variable(observer(\"topojson\")).define(\"topojson\", [\"require\"], function (require) {\n    return require(\"topojson-client@3\");\n  });\n  main.variable(observer(\"world\")).define(\"world\", [\"d3\"], function (d3) {\n    return d3.json(\"https://unpkg.com/world-atlas@1/world/110m.json\");\n  });\n  main.variable(observer(\"land\")).define(\"land\", [\"topojson\", \"world\"], function (topojson, world) {\n    return topojson.feature(world, world.objects.land);\n  });\n  main.variable(observer(\"drag\")).define(\"drag\", [\"versor\", \"d3\"], function (versor, d3) {\n    return function drag(projection) {\n      var v0, q0, r0;\n\n      function dragstarted() {\n        v0 = versor.cartesian(projection.invert(d3.mouse(this)));\n        q0 = versor(r0 = projection.rotate());\n      }\n\n      function dragged() {\n        var v1 = versor.cartesian(projection.rotate(r0).invert(d3.mouse(this)));\n        var q1 = versor.multiply(q0, versor.delta(v0, v1));\n        projection.rotate(versor.rotation(q1));\n      }\n\n      return d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged);\n    };\n  });\n  main.variable(observer(\"height\")).define(\"height\", [\"width\"], function (width) {\n    return width * 0.6;\n  });\n  main.variable(observer(\"projection\")).define(\"projection\", [\"d3\", \"width\", \"height\", \"sphere\"], function (d3, width, height, sphere) {\n    return d3.geoEqualEarth().fitExtent([[1, 1], [width - 1, height - 1]], sphere).translate([width / 2, height / 2]).rotate([0, 0]).precision(0.1);\n  });\n  main.variable(observer(\"sphere\")).define(\"sphere\", function () {\n    return {\n      type: \"Sphere\"\n    };\n  });\n  main.variable(observer(\"resample\")).define(\"resample\", [\"projection\", \"d3\"], function (projection, d3) {\n    return function resample(coordinates) {\n      var i = 0,\n          n = coordinates.length,\n          before = [],\n          after = [];\n\n      while (++i < n) {\n        var c0 = coordinates[i - 1].slice(),\n            c1 = coordinates[i].slice(),\n            p0 = projection(c0),\n            p1 = projection(c1),\n            x10 = p1[0] - p0[0],\n            y10 = p1[1] - p0[1],\n            d1 = x10 * x10 + y10 * y10;\n        before.push(c0);\n        after.push(c0);\n\n        if (d1 > 4 * .1) {\n          // linear distance check\n          var c2 = d3.geoInterpolate(c0, c1)(.5),\n              p2 = projection(c2),\n              x20 = p2[0] - p0[0],\n              y20 = p2[1] - p0[1],\n              dz = y10 * x20 - x10 * y20;\n\n          if (dz * dz / d1 > .1) {\n            // perpendicular distance check\n            var t = (x20 * x10 + y20 * y10) / d1;\n            before.push(projection.invert(c2.resampled = [p0[0] + t * x10, p0[1] + t * y10]));\n            after.push(c2);\n          }\n        }\n      }\n\n      if (n) before.push(c1), after.push(c1);\n      return {\n        before: before,\n        after: after\n      };\n    };\n  });\n  main.variable(observer(\"versor\")).define(\"versor\", [\"require\"], function (require) {\n    return require(\"versor@0.0.3\");\n  });\n  return main;\n}","import _asyncToGenerator from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16, _templateObject17, _templateObject18, _templateObject19, _templateObject20, _templateObject21, _templateObject22, _templateObject23, _templateObject24, _templateObject25;\n\nimport _regeneratorRuntime from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/regenerator\";\nexport default function define(runtime, observer) {\n  var main = runtime.module();\n  main.variable(observer()).define([\"md\", \"opinionPolls\"], function (md, opinionPolls) {\n    return md(_templateObject || (_templateObject = _taggedTemplateLiteral([\"# Tables\\n\\n_This notebook is ready for public input - hit me up at @tmcw on [the forum](https://talk.observablehq.com/t/it-would-be-cool-if-table-tags-had-a-spiffy-default-style/588/4), twitter, or elsewhere to give input. You can use it, but the API is likely to change soon, so use this exact version:_\\n\\n```js\\nimport {table} from \\\"@tmcw/tables@513\\\"\\n```\\n\\nGood tables are good. Making a good table relies on good defaults, good options, and lots of nitpicky finishing touches. This is a notebook that tries to provide a good starting point for table defaults, a fast drop-in read-only data table for data analysis.\\n\\n### Table API:\\n\\n- **data** `Array<Object>`: with consistent data types across rows\\n- **options**:\\n  - **style**: `enum(normal, compact)`: a string value of a default style. By default, tables are designed for comfortable reading with large fonts. To display more information in less screen space, use compact.\\n  - **header** `boolean` (default true): set to false to entirely omit the table header.\\n  - **sortable** `boolean` (default false): make columns sortable\\n  - **paged** `number` (default 25): split data by pages, if it has more than the given number of items.\\n  - **rank** `boolean` (default false): show 1\\u2026 rank numbers in the first column. Cannot be combined with sortable.\\n  - **columns** `Object`: column-specific configuration, indexed by key:\\n    - `[key]`\\n      - **formatter** `Function(value, rowIndex, row) \\u21D2 output`: value formatter for cells. This can return a string, number, or element. If it returns a `<td>` element, that element can \\u2018take over\\u2019 the cell.\\n      - **title** `string`: alternate text for table header - by default, the header cell is named after the key in the data object\\n      - **type** `string`: override auto-detected type for this column - display numbers as strings, etc. Optional, should be one of 'string' or 'number'.\\n\\nAn example of a dataset that table() easily accepts:\\n\\n```json\\n\", \"\\n```\\n\"], [\"# Tables\\n\\n_This notebook is ready for public input - hit me up at @tmcw on [the forum](https://talk.observablehq.com/t/it-would-be-cool-if-table-tags-had-a-spiffy-default-style/588/4), twitter, or elsewhere to give input. You can use it, but the API is likely to change soon, so use this exact version:_\\n\\n\\\\`\\\\`\\\\`js\\nimport {table} from \\\"@tmcw/tables@513\\\"\\n\\\\`\\\\`\\\\`\\n\\nGood tables are good. Making a good table relies on good defaults, good options, and lots of nitpicky finishing touches. This is a notebook that tries to provide a good starting point for table defaults, a fast drop-in read-only data table for data analysis.\\n\\n### Table API:\\n\\n- **data** \\\\`Array<Object>\\\\`: with consistent data types across rows\\n- **options**:\\n  - **style**: \\\\`enum(normal, compact)\\\\`: a string value of a default style. By default, tables are designed for comfortable reading with large fonts. To display more information in less screen space, use compact.\\n  - **header** \\\\`boolean\\\\` (default true): set to false to entirely omit the table header.\\n  - **sortable** \\\\`boolean\\\\` (default false): make columns sortable\\n  - **paged** \\\\`number\\\\` (default 25): split data by pages, if it has more than the given number of items.\\n  - **rank** \\\\`boolean\\\\` (default false): show 1\\u2026 rank numbers in the first column. Cannot be combined with sortable.\\n  - **columns** \\\\`Object\\\\`: column-specific configuration, indexed by key:\\n    - \\\\`[key]\\\\`\\n      - **formatter** \\\\`Function(value, rowIndex, row) \\u21D2 output\\\\`: value formatter for cells. This can return a string, number, or element. If it returns a \\\\`<td>\\\\` element, that element can \\u2018take over\\u2019 the cell.\\n      - **title** \\\\`string\\\\`: alternate text for table header - by default, the header cell is named after the key in the data object\\n      - **type** \\\\`string\\\\`: override auto-detected type for this column - display numbers as strings, etc. Optional, should be one of 'string' or 'number'.\\n\\nAn example of a dataset that table() easily accepts:\\n\\n\\\\`\\\\`\\\\`json\\n\", \"\\n\\\\`\\\\`\\\\`\\n\"])), JSON.stringify(opinionPolls.slice(0, 2), null, 2));\n  });\n  main.variable(observer()).define([\"md\"], function (md) {\n    return md(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n<br /><br />\\n\\n*Click the caret on the left to view code for any example.*\\n\\n\\n### Titanic survivors\\n\\nThis is a table of the Titanic survivors dataset - it shows the data in natural order, first, but the columns are sortable. It shows usage of custom formatters for the Name and Fare columns. The Fare column formatter uses the rowIndex to determine the appropriate format based on the row number. (i.e. $ for the first row only).\"])));\n  });\n  main.variable(observer()).define([\"table\", \"titanicData\", \"d3\", \"html\"], function (table, titanicData, d3, html) {\n    return table(titanicData, {\n      sortable: true,\n      columns: {\n        Fare: {\n          formatter: function formatter(val, i) {\n            // A formatter that changes its behavior based on the row index,\n            // so we don’t repeat the $ for every row.\n            return i === 0 ? d3.format('$.2f')(val) : d3.format('.2f')(val);\n          }\n        },\n        Name: {\n          formatter: function formatter(val) {\n            // Formatters can also return HTML values! Here’s\n            // one that highlights first names.\n            var parts = val.match(/([^,]*)\\,(.*)/);\n            return html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"<strong>\", \"</strong>, \", \"\"])), parts[1], parts[2]);\n          }\n        }\n      }\n    });\n  });\n  main.variable(observer()).define([\"md\"], function (md) {\n    return md(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"<br /><br />\\n\\n### Spotify top charts\\n\\nThis is a table of the top-streamed tracks from [Spotify](https://spotifycharts.com/regional) today. It shows usage of a custom formatter, as well as the `rank` option to add an unlabeled rank column. This also sets the `style` to compact because we\\u2019re displaying a bunch of rows.\"], [\"<br /><br />\\n\\n### Spotify top charts\\n\\nThis is a table of the top-streamed tracks from [Spotify](https://spotifycharts.com/regional) today. It shows usage of a custom formatter, as well as the \\\\`rank\\\\` option to add an unlabeled rank column. This also sets the \\\\`style\\\\` to compact because we\\u2019re displaying a bunch of rows.\"])));\n  });\n  main.variable(observer()).define([\"table\", \"spotify\", \"html\", \"d3\"], function (table, spotify, html, d3) {\n    return table(spotify, {\n      rank: true,\n      style: 'compact',\n      columns: {\n        Track: {\n          formatter: function formatter(val, i) {\n            return html(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"<strong>\", \"</strong> by \", \"\"])), val[0], val[1]);\n          }\n        },\n        Streams: {\n          formatter: d3.format(',')\n        }\n      }\n    });\n  });\n  main.variable(observer(\"table\")).define(\"table\", [\"defaultOptions\", \"html\", \"th\", \"identity\"], function (defaultOptions, html, th, identity) {\n    return function (data, options) {\n      options = Object.assign({}, defaultOptions, options);\n      var _options = options,\n          sortable = _options.sortable,\n          rank = _options.rank,\n          paged = _options.paged;\n      var sortKey = undefined;\n      var sortDirection = true;\n      var page = 0;\n\n      if (sortable && rank) {\n        throw new Error(\"A table can either be ranked or sortable, but not both\");\n      }\n\n      var columns = Object.keys(data[0]).map(function (key) {\n        var opts = options.columns[key] || {};\n        return {\n          key: key,\n          type: opts.type || typeof data[0][key],\n          options: opts\n        };\n      });\n\n      function bake() {\n        if (sortKey) {\n          data = data.slice().sort(function (a, b) {\n            var as = a[sortKey];\n            var bs = b[sortKey]; // make this sort stable\n\n            if (as == bs) return JSON.stringify(a).localeCompare(JSON.stringify(b));\n            var res = as > bs ? 1 : as < bs ? -1 : 0;\n            if (sortDirection) res = -res;\n            return res;\n          });\n        }\n\n        var rows = data.slice(page * paged, page * paged + paged);\n        var pages = Math.ceil(data.length / paged);\n        return html(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"<div><div>\\n      <style>\\n.pretty-pager {\\n  padding-top: 1rem;\\n}\\n.pretty-pager button {\\n  cursor: pointer;\\n  border-radius: 3px;\\n  border: 1px solid #fff;\\n  font-size: inherit;\\n}\\n.pretty-pager button:hover {\\n  border: 1px solid #888;\\n}\\n.pretty-table.normal {\\n  font-size: 15px;\\n}\\n.pretty-table.normal th,\\n.pretty-table.normal td {\\n  padding: 3px 2px;\\n}\\n.pretty-table th,\\n.pretty-table td {\\n  vertical-align: top;\\n}\\n.pretty-table thead th {\\n  text-transform: uppercase;\\n  font-weight:500;\\n}\\n.pretty-table thead th.column-type-number string {\\n  order: 1;\\n}\\n.pretty-table th.sortable {\\n  cursor: pointer;\\n}\\n.pretty-table thead th.column-type-number,\\n.pretty-table tbody td.cell-type-number,\\n.pretty-table tbody td.cell-rank {\\n  text-align:right;\\n}\\n.pretty-table tbody td.cell-type-number,\\n.pretty-table tbody td.cell-rank {\\n  font-family: menlo,consolas,monaco,monospace;\\n  font-size: 90%;\\n}\\n.pretty-table tbody td.cell-rank {\\n  padding-right: 1em;\\n  color: #666;\\n}\\n\\n</style>\\n        <table class='pretty-table \", \"'>\\n          \", \"\\n          <tbody>\\n            \", \"\\n          </tbody>\\n        </table>\\n        \", \"\\n      </div></div>\"])), options.style, options.header === false ? \"\" : html(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"<thead>\\n            \", \"\\n            \", \"\\n          </thead>\"])), rank ? html(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"<th></th>\"]))) : \"\", columns.map(function (c) {\n          return th(c, sortKey, sortDirection, sortable);\n        })), rows.map(function (row, i) {\n          return html(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"<tr>\\n              \", \"\\n              \", \"\\n            </tr>\"])), rank ? html(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"<td class='cell-rank'>\", \"</td>\"])), i + 1) : \"\", columns.map(function (c) {\n            var displayValue = (c.options.formatter || identity)(row[c.key], i, row);\n\n            if (displayValue instanceof window.HTMLElement && displayValue.tagName == \"TD\") {\n              return displayValue;\n            }\n\n            return html(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"<td class='cell-type-\", \"'>\", \"</td>\"])), c.type, displayValue);\n          }));\n        }), pages ? html(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"<div class='pretty-pager'>\\n          <button data-action=\\\"next\\\">Previous</button>\\n          \", \"\\n          <button data-action=\\\"previous\\\">Next</button>\\n        </div>\"])), Array.from({\n          length: pages\n        }).map(function (_, i) {\n          return html(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"<button data-page=\\\"\", \"\\\">\", \"</button>\"])), i + 1, i + 1);\n        })) : \"\");\n      }\n\n      var dom = bake();\n\n      function rerender() {\n        dom.firstChild.remove();\n        dom.appendChild(bake().firstChild);\n      }\n\n      dom.addEventListener(\"click\", function (e) {\n        if (e.target.tagName === \"TH\" && sortable) {\n          if (sortKey == e.target.dataset.key) {\n            sortDirection = !sortDirection;\n          }\n\n          sortKey = e.target.dataset.key;\n          rerender();\n        }\n\n        if (e.target.tagName === \"BUTTON\") {\n          if (e.target.dataset.action) {\n            switch (e.target.dataset.action) {\n              case \"next\":\n                page++, rerender();\n                break;\n\n              case \"previous\":\n                page--, rerender();\n                break;\n            }\n          } else if (e.target.dataset.page) {\n            page = parseInt(e.target.dataset.page), rerender();\n          }\n        }\n      });\n      return dom;\n    };\n  });\n  main.variable(observer()).define([\"md\"], function (md) {\n    return md(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"<br /><br />\\n\\n### Kenya data\\n\\nDemonstration of [data from Quartz Atlas](https://www.theatlas.com/charts/BJGldhdsG): demonstrates usage of the _type_ override, a custom formatter, and overriding titles.\"])));\n  });\n  main.variable(observer()).define([\"table\", \"kenyaData\", \"html\", \"d3\"], function (table, kenyaData, html, d3) {\n    return table(kenyaData, {\n      columns: {\n        method: {\n          title: ''\n        },\n        percent: {\n          title: 'Method of transfer (2006)',\n          type: 'string',\n          formatter: function formatter(val, i) {\n            return html(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([\"<div style='display:flex;align-items:center;height:1.5em;'>\\n          <div style='width:\", \"%;height:1em;background:#5f27cd;margin-right:0.5em;'></div>\", \"\\n        </div>\"])), val, i == 0 ? d3.format('.0%')(val / 100) : val);\n          }\n        }\n      }\n    });\n  });\n  main.variable(observer()).define([\"md\"], function (md) {\n    return md(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([\"<br /><br />\\n\\n### Heat-tables\\n\\nA tribute to the [538](https://fivethirtyeight.com/features/the-year-in-trumps-approval-rating/) table style for opinion polls. Demonstrates that if a cell formatter returns a `<td>` element, it can take over the entire cell to do things like setting background colors.\\n\\nThis also demonstrates using a table with viewof: click a name to view the person below.\\n\"], [\"<br /><br />\\n\\n### Heat-tables\\n\\nA tribute to the [538](https://fivethirtyeight.com/features/the-year-in-trumps-approval-rating/) table style for opinion polls. Demonstrates that if a cell formatter returns a \\\\`<td>\\\\` element, it can take over the entire cell to do things like setting background colors.\\n\\nThis also demonstrates using a table with viewof: click a name to view the person below.\\n\"])));\n  });\n  main.variable(observer(\"viewof name\")).define(\"viewof name\", [\"table\", \"opinionPolls\", \"html\", \"d3\"], function (table, opinionPolls, html, d3) {\n    var t = table(opinionPolls, {\n      columns: {\n        name: {\n          formatter: function formatter(value, i, row) {\n            var elem = html(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral([\"<a style='cursor:pointer'>\", \"</a>\"])), value);\n            elem.addEventListener('click', function () {\n              t.value = row;\n              t.dispatchEvent(new CustomEvent('input'));\n            });\n            return elem;\n          }\n        },\n        elected: {\n          type: 'string'\n        },\n        approval: {\n          formatter: function formatter(val, i) {\n            var color = d3.scaleLinear().domain([-2, 0, 2]).range([\"#f4c8cf\", \"#f8f8f8\", \"#c8f4cb\"]);\n            return html(_templateObject18 || (_templateObject18 = _taggedTemplateLiteral([\"<td style='background:\", \";text-align:right;padding:2px 5px;'>\", \"</td>\"])), color(val), val);\n          }\n        }\n      }\n    });\n    return t;\n  });\n  main.variable(observer(\"name\")).define(\"name\", [\"Generators\", \"viewof name\"], function (G, _) {\n    return G.input(_);\n  });\n  main.variable(observer()).define([\"name\", \"md\"], function (name, md) {\n    return name && md(_templateObject19 || (_templateObject19 = _taggedTemplateLiteral([\"## \", \"\\n\\nI was elected \", \" and have an approval rating of \", \".\"])), name.name, name.elected, name.approval);\n  });\n  main.variable(observer(\"th\")).define(\"th\", [\"html\"], function (html) {\n    return function (c, sortKey, sortDirection, sortable) {\n      var title = c.options.title;\n      var sortIndicator = sortKey && sortDirection ? \"↑\" : \"↓\";\n      var arrow = html(_templateObject20 || (_templateObject20 = _taggedTemplateLiteral([\"<span style='\", \"'>\", \"</span>\"])), sortKey === c.key ? \"\" : \"visibility:hidden\", sortIndicator);\n      var displayedTitle = title !== undefined ? title : c.key;\n      return c.type === \"number\" ? html(_templateObject21 || (_templateObject21 = _taggedTemplateLiteral([\"<th\\n      data-key=\\\"\", \"\\\"\\n      class='column-type-\", \" \", \"'>\\n        \", \"\", \"\\n    </th>\"])), c.key, c.type, sortable ? \"sortable\" : \"\", arrow, displayedTitle) : html(_templateObject22 || (_templateObject22 = _taggedTemplateLiteral([\"<th\\n      data-key=\\\"\", \"\\\"\\n      class='column-type-\", \" \", \"'>\\n        \", \"\", \"\\n    </th>\"])), c.key, c.type, sortable ? \"sortable\" : \"\", displayedTitle, arrow);\n    };\n  });\n  main.variable(observer(\"style\")).define(\"style\", function () {\n    return \"\\n\\n\";\n  });\n  main.variable(observer()).define([\"md\"], function (md) {\n    return md(_templateObject23 || (_templateObject23 = _taggedTemplateLiteral([\"Here's [my are.na collection](https://www.are.na/tom-macwright/good-looking-tables) of inspirations. My key observations:\\n\\n- \\u2714 Numeric columns should really have monospaced numbers: it\\u2019s important for numbers to line up\\n- \\u2714 Most data tables use title-case, bold or semibold headers\\n\\nNecessary perks:\\n\\n- Good support for N/A values\\n- code-based reordering for columns\\n\\nStretch goals:\\n\\n- \\u2714\\uFE0F Sorting\\n- Selecting of rows\\n\\nI don\\u2019t see any of the following in the wild:\\n\\n- Vertical borders\\n- Alternate row coloring\"])));\n  });\n  main.variable(observer(\"defaultOptions\")).define(\"defaultOptions\", function () {\n    return {\n      columns: {},\n      style: 'normal',\n      paged: 25\n    };\n  });\n  main.variable(observer(\"identity\")).define(\"identity\", function () {\n    return function (i) {\n      return i;\n    };\n  });\n  main.variable(observer()).define([\"md\"], function (md) {\n    return md(_templateObject24 || (_templateObject24 = _taggedTemplateLiteral([\"Helpers (not used in export path)\"])));\n  });\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], function (require) {\n    return require('d3@5');\n  });\n  main.variable(observer()).define([\"md\"], function (md) {\n    return md(_templateObject25 || (_templateObject25 = _taggedTemplateLiteral([\"Datasets\"])));\n  });\n  main.variable(observer(\"spotifyCharts\")).define(\"spotifyCharts\", [\"d3\", \"FileAttachment\"], /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(d3, FileAttachment) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = d3;\n              _context.next = 3;\n              return FileAttachment(\"regional-global-daily-latest@2.csv\").url();\n\n            case 3:\n              _context.t1 = _context.sent;\n              return _context.abrupt(\"return\", _context.t0.csv.call(_context.t0, _context.t1));\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n  main.variable(observer(\"spotify\")).define(\"spotify\", [\"spotifyCharts\"], function (spotifyCharts) {\n    return spotifyCharts.map(function (row) {\n      return {\n        Track: [row['Track Name'], row['Artist']],\n        Streams: +row.Streams\n      };\n    });\n  });\n  main.variable(observer(\"kenyaData\")).define(\"kenyaData\", function () {\n    return [{\n      method: \"Hand\",\n      percent: 58\n    }, {\n      method: \"Bus\",\n      percent: 27\n    }, {\n      method: \"Post office, money order\",\n      percent: 24\n    }, {\n      method: \"Direct deposit\",\n      percent: 11\n    }, {\n      method: \"Money transfer services\",\n      percent: 9\n    }, {\n      method: \"Cheque\",\n      percent: 4\n    }, {\n      method: \"Someone else's account\",\n      percent: 3\n    }];\n  });\n  main.variable(observer(\"opinionPolls\")).define(\"opinionPolls\", function () {\n    return ['Barney', 'Homer', 'Bart', 'Lisa', 'Marge'].map(function (name, i) {\n      return {\n        name: name,\n        elected: 1990 + i * 5,\n        approval: i - 2\n      };\n    });\n  });\n  main.variable(observer(\"titanicData\")).define(\"titanicData\", [\"d3\"], function (d3) {\n    return d3.csvParse(\"PassengerId,Survived,Pclass,Name,Sex,Age,SibSp,Parch,Ticket,Fare,Cabin,Embarked\\n1,0,3,\\\"Braund, Mr. Owen Harris\\\",male,22,1,0,A/5 21171,7.25,,S\\n2,1,1,\\\"Cumings, Mrs. John Bradley (Florence Briggs Thayer)\\\",female,38,1,0,PC 17599,71.2833,C85,C\\n3,1,3,\\\"Heikkinen, Miss. Laina\\\",female,26,0,0,STON/O2. 3101282,7.925,,S\\n4,1,1,\\\"Futrelle, Mrs. Jacques Heath (Lily May Peel)\\\",female,35,1,0,113803,53.1,C123,S\\n5,0,3,\\\"Allen, Mr. William Henry\\\",male,35,0,0,373450,8.05,,S\\n6,0,3,\\\"Moran, Mr. James\\\",male,,0,0,330877,8.4583,,Q\\n7,0,1,\\\"McCarthy, Mr. Timothy J\\\",male,54,0,0,17463,51.8625,E46,S\\n8,0,3,\\\"Palsson, Master. Gosta Leonard\\\",male,2,3,1,349909,21.075,,S\").map(function (_ref2) {\n      var Age = _ref2.Age,\n          Name = _ref2.Name,\n          Fare = _ref2.Fare;\n      return {\n        Name: Name,\n        Age: +Age,\n        Fare: +Fare\n      };\n    });\n  });\n  return main;\n}","import _asyncToGenerator from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16, _templateObject17;\n\nimport _regeneratorRuntime from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/regenerator\";\n// https://observablehq.com/@robinl/flight-distance-calculator@1090\nimport define1 from \"./65265a2092377a48@68.js\";\nimport define2 from \"./35510f059fbb566b@520.js\";\nexport default function define(runtime, observer) {\n  var main = runtime.module();\n  main.variable(observer(\"title\")).define(\"title\", [\"md\"], function (md) {\n    return md(_templateObject || (_templateObject = _taggedTemplateLiteral([\"# Flight distance calculator\"])));\n  });\n  main.variable(observer()).define([\"md\"], function (md) {\n    return md(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"*A final version of this notebook can be viewed on my blog [here](https://www.robinlinacre.com/flight_distance/).*\"])));\n  });\n  main.variable(observer(\"viewof flights_list\")).define(\"viewof flights_list\", [\"html\", \"options\", \"get_icao_from_value\"], function (html, options, get_icao_from_value) {\n    var dep_box = html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n\\n         <input name=\\\"dep\\\" type=\\\"text\\\" autocomplete=\\\"off\\\" \\n          placeholder=\\\"Choose departure airport\\\" style=\\\"font-size: 1em;\\\" list=options>\\n          <datalist id=\\\"options\\\">\\n              \", \"\\n          </datalist>\"])), options.map(function (d) {\n      return Object.assign(html(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"<option>\"]))), {\n        value: d\n      });\n    }));\n    var arr_box = html(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"<input name=\\\"arr\\\" type=\\\"text\\\" autocomplete=\\\"off\\\" \\n          placeholder=\\\"Choose arrival airport\\\" style=\\\"font-size: 1em;\\\" list=options>\\n          <datalist id=\\\"options\\\">\\n              \", \"\\n          </datalist>\"])), options.map(function (d) {\n      return Object.assign(html(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"<option>\"]))), {\n        value: d\n      });\n    }));\n    var add_to_list = html(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"<input type=\\\"button\\\" value=\\\"Add flight\\\">\"])));\n    var reset_list = html(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"<input type=\\\"button\\\" value=\\\"Clear all flights\\\">\"])));\n    var empty_inputs = html(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"<input type=\\\"button\\\" value=\\\"Clear current inputs\\\">\"])));\n    var switch_inputs = html(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"<input type=\\\"button\\\" value=\\\"Switch departure and arrival airports\\\">\"])));\n    var div = html(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"<p>\", \" \", \"<br/>\", \"\", \"\", \"\", \"</p>\"])), dep_box, arr_box, add_to_list, reset_list, empty_inputs, switch_inputs);\n\n    add_to_list.onclick = function () {\n      var dep_value = dep_box.children[0].value;\n      var arr_value = arr_box.children[0].value;\n\n      if (dep_value != \"\" && arr_value != \"\") {\n        div.value.push([get_icao_from_value(dep_value), get_icao_from_value(arr_value)]);\n      } else {\n        throw \"Must select both a departure and arrival airport\";\n      }\n\n      div.dispatchEvent(new CustomEvent('input'));\n    };\n\n    empty_inputs.onclick = function () {\n      dep_box.children[0].value = \"\";\n      arr_box.children[0].value = \"\";\n    };\n\n    switch_inputs.onclick = function () {\n      var dval = dep_box.children[0].value;\n      dep_box.children[0].value = arr_box.children[0].value;\n      arr_box.children[0].value = dval;\n    };\n\n    reset_list.onclick = function () {\n      div.value = [];\n      dep_box.children[0].value = \"\";\n      arr_box.children[0].value = \"\";\n      div.dispatchEvent(new CustomEvent('input'));\n    };\n\n    div.value = [];\n    return div;\n  });\n  main.variable(observer(\"flights_list\")).define(\"flights_list\", [\"Generators\", \"viewof flights_list\"], function (G, _) {\n    return G.input(_);\n  });\n  main.variable(observer(\"selected_airports\")).define(\"selected_airports\", [\"flights_list\", \"airports_icao_dict\"], function (flights_list, airports_icao_dict) {\n    return flights_list.map(function (d) {\n      return [airports_icao_dict.get(d[0]), airports_icao_dict.get(d[1])];\n    });\n  });\n  main.variable(observer(\"table_of_distances\")).define(\"table_of_distances\", [\"data_for_table\", \"table\", \"md\"], function (data_for_table, table, md) {\n    if (data_for_table.length > 0) {\n      return table(data_for_table);\n    } else {\n      return md(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"Add a flight to display flight data here.\"])));\n    }\n  });\n  main.variable(observer(\"blurb\")).define(\"blurb\", [\"data_for_table\", \"md\", \"fmt_num\", \"total_flight_miles\", \"fmt_num_round\", \"total_energy_usage\", \"tonnes_co2\"], function (data_for_table, md, fmt_num, total_flight_miles, fmt_num_round, total_energy_usage, tonnes_co2) {\n    if (data_for_table.length > 0) {\n      return md(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"Your total flight distance is \", \" miles.  If flying economy, this will have required around \", \" kwh of energy, and the total co2 emissions will be around \", \" tonnes. \"])), fmt_num(total_flight_miles), fmt_num_round(total_energy_usage), fmt_num_round(tonnes_co2));\n    } else {\n      return md(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"\"])));\n    }\n  });\n  main.variable(observer(\"selected_airports_with_distances\")).define(\"selected_airports_with_distances\", [\"selected_airports\", \"getDistanceFromLatLonInMiles\"], function (selected_airports, getDistanceFromLatLonInMiles) {\n    var sa = selected_airports.map(function (d) {\n      var airport0 = d[0];\n      var airport1 = d[1];\n      var new_dict = {};\n      new_dict[\"from\"] = airport0.name;\n      new_dict[\"to\"] = airport1.name;\n\n      for (var _i = 0, _Object$entries = Object.entries(airport0); _i < _Object$entries.length; _i++) {\n        var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n            key = _Object$entries$_i[0],\n            value = _Object$entries$_i[1];\n\n        new_dict[key + \"_from\"] = value;\n      }\n\n      for (var _i2 = 0, _Object$entries2 = Object.entries(airport1); _i2 < _Object$entries2.length; _i2++) {\n        var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i2], 2),\n            _key = _Object$entries2$_i[0],\n            _value = _Object$entries2$_i[1];\n\n        new_dict[_key + \"_to\"] = _value;\n      }\n\n      var lat1 = new_dict[\"lat_from\"];\n      var lng1 = new_dict[\"lng_from\"];\n      var lat2 = new_dict[\"lat_to\"];\n      var lng2 = new_dict[\"lng_to\"];\n      new_dict[\"distance\"] = getDistanceFromLatLonInMiles(lat1, lng1, lat2, lng2);\n      return new_dict;\n    });\n    return sa;\n  });\n  main.variable(observer(\"data_for_table\")).define(\"data_for_table\", [\"selected_airports_with_distances\", \"d3\"], function (selected_airports_with_distances, d3) {\n    var obj = selected_airports_with_distances.map(function (d) {\n      return {\n        from: d[\"name_from\"],\n        to: d[\"name_to\"],\n        miles: d3.format(\",.0f\")(d[\"distance\"])\n      };\n    });\n    return obj;\n  });\n  main.variable(observer()).define([\"d3\", \"selected_airports_with_distances\"], function (d3, selected_airports_with_distances) {\n    return d3.csvFormat(selected_airports_with_distances);\n  });\n  main.variable(observer(\"download_as_csv\")).define(\"download_as_csv\", [\"DOM\", \"serialize\", \"selected_airports_with_distances\"], function (DOM, serialize, selected_airports_with_distances) {\n    return DOM.download(serialize(selected_airports_with_distances), \"flights\", \"Download CSV\");\n  });\n  main.variable(observer(\"file_upload_blurb\")).define(\"file_upload_blurb\", [\"md\"], function (md) {\n    return md(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([\"Bulk import previously created csv (needs at minimum `icao_from` and `icao_to` fields)\"], [\"Bulk import previously created csv (needs at minimum \\\\`icao_from\\\\` and \\\\`icao_to\\\\` fields)\"])));\n  });\n  main.variable(observer(\"viewof upload\")).define(\"viewof upload\", [\"html\"], function (html) {\n    return html(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([\"<input type=file accept=\\\"text/csv\\\" >\"])));\n  });\n  main.variable(observer(\"upload\")).define(\"upload\", [\"Generators\", \"viewof upload\"], function (G, _) {\n    return G.input(_);\n  });\n  main.variable(observer(\"csv_data\")).define(\"csv_data\", [\"Files\", \"upload\", \"d3\", \"viewof flights_list\"], /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(Files, upload, d3, $0) {\n      var text, csv;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return Files.text(upload);\n\n            case 2:\n              text = _context.sent;\n              csv = d3.csvParse(text);\n              $0.value = csv.map(function (d) {\n                return [d[\"icao_from\"], d[\"icao_to\"]];\n              });\n              $0.dispatchEvent(new CustomEvent('input'));\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2, _x3, _x4) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n  main.variable(observer(\"flights_chart\")).define(\"flights_chart\", [\"chart\", \"selected_airports_with_distances\"], function (chart, selected_airports_with_distances) {\n    return chart(selected_airports_with_distances);\n  });\n  main.variable(observer(\"total_flight_miles\")).define(\"total_flight_miles\", [\"d3\", \"selected_airports_with_distances\"], function (d3, selected_airports_with_distances) {\n    return d3.sum(selected_airports_with_distances, function (d) {\n      return d.distance;\n    });\n  });\n  main.variable(observer(\"total_energy_usage\")).define(\"total_energy_usage\", [\"eu\", \"total_flight_miles\"], function (eu, total_flight_miles) {\n    return eu.flying.flying_miles_to_kwh(total_flight_miles);\n  });\n  main.variable(observer(\"kwh_to_kg_co2\")).define(\"kwh_to_kg_co2\", [\"eu\"], function (eu) {\n    return function (kwh) {\n      return kwh * eu.convert.per(\"kg_co2_from_jet_fuel/kwh\");\n    };\n  });\n  main.variable(observer(\"tonnes_co2\")).define(\"tonnes_co2\", [\"kwh_to_kg_co2\", \"eu\", \"total_flight_miles\"], function (kwh_to_kg_co2, eu, total_flight_miles) {\n    return kwh_to_kg_co2(eu.flying.flying_miles_to_kwh(total_flight_miles)) / 1000;\n  });\n  main.variable(observer(\"fmt_num\")).define(\"fmt_num\", [\"d3\"], function (d3) {\n    return d3.format(\",.0f\");\n  });\n  main.variable(observer(\"fmt_num_round\")).define(\"fmt_num_round\", [\"d3\"], function (d3) {\n    return d3.format(\",.2r\");\n  });\n  main.variable(observer()).define([\"md\"], function (md) {\n    return md(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral([\"### Modules & Imports\"])));\n  });\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], function (require) {\n    return require(\"d3\");\n  });\n  main.variable(observer(\"eu\")).define(\"eu\", [\"require\"], function (require) {\n    return require(\"@robinl/energy_usage@0.1.6\");\n  });\n  var child1 = runtime.module(define1);\n  main.import(\"chart\", child1);\n  var child2 = runtime.module(define2);\n  main.import(\"table\", child2);\n  main.variable(observer(\"serialize\")).define(\"serialize\", [\"d3\"], function (d3) {\n    return function serialize(data) {\n      return new Blob([d3.csvFormat(data)], {\n        type: \"text/csv\"\n      });\n    };\n  });\n  main.variable(observer(\"getDistanceFromLatLonInMiles\")).define(\"getDistanceFromLatLonInMiles\", function () {\n    return function getDistanceFromLatLonInMiles(lat1, lon1, lat2, lon2) {\n      function deg2rad(deg) {\n        return deg * (Math.PI / 180);\n      }\n\n      var R = 6371; // Radius of the earth in km\n\n      var dLat = deg2rad(lat2 - lat1); // deg2rad below\n\n      var dLon = deg2rad(lon2 - lon1);\n      var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n      var d = R * c; // Distance in km\n\n      return d * 0.621371; //to miles\n    };\n  });\n  main.variable(observer(\"airports\")).define(\"airports\", [\"d3\"], function (d3) {\n    return d3.text(\"https://raw.githubusercontent.com/jpatokal/openflights/master/data/airports.dat\").then(function (t) {\n      var header = \"id,name,city,country,iata,icao,lat,lng\\n\";\n      var t2 = header + t;\n      var data3 = d3.csvParse(t2, d3.autoType);\n      return data3;\n    });\n  });\n  main.variable(observer(\"airports_icao_dict\")).define(\"airports_icao_dict\", [\"airports\"], function (airports) {\n    return new Map(airports.map(function (i) {\n      return [i.icao, i];\n    }));\n  });\n  main.variable(observer(\"options\")).define(\"options\", [\"airports\"], function (airports) {\n    return airports.map(function (val) {\n      return \"\".concat(val.name, \" \").concat(val.city, \" \").concat(val.country, \" \").concat(val.iata, \" (\").concat(val.icao, \")\");\n    });\n  });\n  main.variable(observer(\"get_icao_from_value\")).define(\"get_icao_from_value\", function () {\n    return function (val) {\n      var myRegexp = /\\((\\w{4})\\)$/g;\n      var match = myRegexp.exec(val);\n\n      if (match) {\n        return match[1];\n      }\n    };\n  });\n  return main;\n}","import React from \"react\"\nimport define from \"@robinl/flight-distance-calculator\"\nimport ObsMdxPage from \"../components/mdx_obs_page\"\n\nexport const frontmatter = {\n  title: \"Flight distance calculator\",\n  post_date: \"2019-10-09\",\n  code_url:\n    \"https://observablehq.com/@robinl/flight-distance-calculator/\",\n  post_type: \"obs\",\n  post_category: \"energy\",\n  description: \"Simple flight distance calculator.  Advert free.  Export data to spreadsheet.\"\n}\n\nlet output_order = [\n  \"title\",\n  \"viewof flights_list\",\n  \"blurb\",\n  \"table_of_distances\",\n  \"download_as_csv\",\n  \"flights_chart\",\n  \"file_upload_blurb\",\n  \"viewof upload\",\n]\n\nexport default ({ data }) => (\n  <ObsMdxPage\n    define={define}\n    output_order={output_order}\n    post_frontmatter={frontmatter}\n  />\n)\n"],"sourceRoot":""}