{"version":3,"sources":["webpack://gatsby-starter-hello-world/./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","webpack://gatsby-starter-hello-world/./src/components/mdx_obs_page.jsx","webpack://gatsby-starter-hello-world/./node_modules/@robinl/my-flights/fe522555ef506fc9@514.js","webpack://gatsby-starter-hello-world/./src/pages/flights.jsx"],"names":["_taggedTemplateLiteral","strings","raw","slice","Object","freeze","defineProperties","value","props","post","define","output_order","children","css","className","title","post_frontmatter","description","_templateObject","_templateObject2","_templateObject3","runtime","observer","main","module","variable","md","diff_years","start_end_date","format_date","routes","fmt_num","average_miles","total_miles","fmt_num_round","eu","tonnes_co2","length","flying","flying_miles_to_kwh","DOM","width","height","d3","projection","sphere","land","resample","colour_scale","drag","context","context2d","path","geoPath","render","clearRect","beginPath","fillStyle","fill","stroke","forEach","d","coordinates","resampled","mid_point_with_drift","route","type","lineWidth","lineO","strokeStyle","select","canvas","call","on","node","geoOrthographic","fitExtent","translate","rotate","precision","kwh_to_kg_co2","kwh","convert","per","sum","mean","require","extent","format","dt2","dt1","diff","getTime","Math","abs","round","toISOString","split","scaleSequential","interpolateOrRd","domain","i","n","before","after","c0","c1","p0","p1","x10","y10","d1","push","c2","geoInterpolate","p2","x20","y20","dz","t","invert","versor","v0","q0","r0","cartesian","mouse","this","v1","q1","multiply","delta","rotation","topojson","world","feature","objects","json","csv","autoType","routes_raw","map","random","frontmatter","post_date","code_url","post_type","post_category","data"],"mappings":"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","file":"component---src-pages-flights-jsx-1fd65e69b9fd51371700.js","sourcesContent":["export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","import React from 'react'\nimport Layout from \"../layouts/layout\"\nimport ObeservableNotebookDiv from \"./observable_div\"\nimport PostFrontMatter from \"./post_frontmatter\"\nimport SEO from \"../components/seo\"\n\nfunction ObsMdxPage(props) {\n\n\n  let post\n\n  if (props.define) {\n    post = <ObeservableNotebookDiv define={props.define} output_order={props.output_order} />\n  } else {\n    post = props.children\n  }\n\n  return (\n    <Layout css={props.className}>\n      <SEO title={props.post_frontmatter.title} description={props.post_frontmatter.description} />\n      <PostFrontMatter post_frontmatter={props.post_frontmatter} />\n      {post}\n    </Layout>\n  )\n\n}\n\nexport default ObsMdxPage","import _taggedTemplateLiteral from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3;\n\n// https://observablehq.com/@robinl/my-flights@514\nexport default function define(runtime, observer) {\n  var main = runtime.module();\n  main.variable(observer(\"title\")).define(\"title\", [\"md\", \"diff_years\", \"start_end_date\"], function (md, diff_years, start_end_date) {\n    return md(_templateObject || (_templateObject = _taggedTemplateLiteral([\"# \", \" years of flights\"])), diff_years(start_end_date[1], start_end_date[0]));\n  });\n  main.variable(observer()).define([\"md\"], function (md) {\n    return md(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"A final version of this notebook can be viewed on my blog [here](https://www.robinlinacre.com/flights/).\"])));\n  });\n  main.variable(observer(\"blurb\")).define(\"blurb\", [\"md\", \"format_date\", \"start_end_date\", \"routes\", \"fmt_num\", \"average_miles\", \"total_miles\", \"fmt_num_round\", \"eu\", \"tonnes_co2\"], function (md, format_date, start_end_date, routes, fmt_num, average_miles, total_miles, fmt_num_round, eu, tonnes_co2) {\n    return md(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"Between \", \" and \", \" I took \", \" flights with and average distance of \", \" miles, and total milage of \", \".  Total energy usage was around \", \" kwh or \", \" tonnes of co2.\\n\\nYou can drag the globe below to rotate.\"])), format_date(start_end_date[0]), format_date(start_end_date[1]), routes.length, fmt_num(average_miles), fmt_num(total_miles), fmt_num_round(eu.flying.flying_miles_to_kwh(total_miles)), fmt_num_round(tonnes_co2));\n  });\n  main.variable(observer(\"chart\")).define(\"chart\", [\"DOM\", \"width\", \"height\", \"d3\", \"projection\", \"sphere\", \"land\", \"routes\", \"resample\", \"colour_scale\", \"drag\"], function (DOM, width, height, d3, projection, sphere, land, routes, resample, colour_scale, drag) {\n    var context = DOM.context2d(width, height);\n    var path = d3.geoPath(projection, context);\n\n    function render() {\n      context.clearRect(0, 0, width, height);\n      context.beginPath(), path(sphere), context.fillStyle = \"#fff\", context.fill();\n      context.beginPath(), path(land), context.fillStyle = \"#000\", context.fill();\n      context.beginPath(), path(sphere), context.stroke();\n      routes.forEach(function (d) {\n        var coordinates = [[d[\"lng_from\"], d[\"lat_from\"]], [d[\"lng_to\"], d[\"lat_to\"]]];\n        var resampled = resample(coordinates);\n        var mid_point_with_drift = [resampled[\"after\"][1][0] + d[\"random\"], resampled[\"after\"][1][1] + d[\"random\"]];\n        resampled[\"after\"][1] = mid_point_with_drift;\n        var route = {\n          type: \"LineString\",\n          coordinates: resampled[\"after\"]\n        };\n        context.lineWidth = 1;\n        context.lineO;\n        context.beginPath(), path(route), context.strokeStyle = colour_scale(d[\"date\"]), context.stroke();\n      });\n      context.lineWidth = 1;\n      context.strokeStyle = \"#000000\";\n    }\n\n    return d3.select(context.canvas).call(drag(projection).on(\"drag.render\", render)).call(render).node();\n  });\n  main.variable(observer(\"projection\")).define(\"projection\", [\"d3\", \"width\", \"height\", \"sphere\"], function (d3, width, height, sphere) {\n    return d3.geoOrthographic().fitExtent([[1, 1], [width - 1, height - 1]], sphere).translate([width / 2, height / 2]).rotate([0, -51]).precision(0.1);\n  });\n  main.variable(observer(\"tonnes_co2\")).define(\"tonnes_co2\", [\"kwh_to_kg_co2\", \"eu\", \"total_miles\"], function (kwh_to_kg_co2, eu, total_miles) {\n    return kwh_to_kg_co2(eu.flying.flying_miles_to_kwh(total_miles)) / 1000;\n  });\n  main.variable(observer(\"kwh_to_kg_co2\")).define(\"kwh_to_kg_co2\", [\"eu\"], function (eu) {\n    return function (kwh) {\n      return kwh * eu.convert.per(\"kg_co2_jet_fuel/kwh\");\n    };\n  });\n  main.variable(observer(\"total_miles\")).define(\"total_miles\", [\"d3\", \"routes\"], function (d3, routes) {\n    return d3.sum(routes, function (d) {\n      return d[\"distance\"];\n    });\n  });\n  main.variable(observer(\"average_miles\")).define(\"average_miles\", [\"d3\", \"routes\"], function (d3, routes) {\n    return d3.mean(routes, function (d) {\n      return d[\"distance\"];\n    });\n  });\n  main.variable(observer(\"eu\")).define(\"eu\", [\"require\"], function (require) {\n    return require(\"@robinl/energy_usage@0.0.34\");\n  });\n  main.variable(observer(\"start_end_date\")).define(\"start_end_date\", [\"d3\", \"routes\"], function (d3, routes) {\n    return d3.extent(routes, function (d) {\n      return d[\"date\"];\n    });\n  });\n  main.variable(observer(\"fmt_num\")).define(\"fmt_num\", [\"d3\"], function (d3) {\n    return d3.format(\",.0f\");\n  });\n  main.variable(observer(\"fmt_num_round\")).define(\"fmt_num_round\", [\"d3\"], function (d3) {\n    return d3.format(\",.2r\");\n  });\n  main.variable(observer(\"diff_years\")).define(\"diff_years\", function () {\n    return function diff_years(dt2, dt1) {\n      var diff = (dt2.getTime() - dt1.getTime()) / 1000;\n      diff /= 60 * 60 * 24;\n      return Math.abs(Math.round(diff / 365.25));\n    };\n  });\n  main.variable(observer(\"format_date\")).define(\"format_date\", function () {\n    return function (d) {\n      return d.toISOString().split('T')[0];\n    };\n  });\n  main.variable(observer(\"colour_scale\")).define(\"colour_scale\", [\"d3\", \"routes\"], function (d3, routes) {\n    return d3.scaleSequential(d3.interpolateOrRd).domain(d3.extent(routes, function (d) {\n      return d[\"date\"];\n    }));\n  });\n  main.variable(observer(\"resample\")).define(\"resample\", [\"projection\", \"d3\"], function (projection, d3) {\n    return function resample(coordinates) {\n      var i = 0,\n          n = coordinates.length,\n          before = [],\n          after = [];\n\n      while (++i < n) {\n        var c0 = coordinates[i - 1].slice(),\n            c1 = coordinates[i].slice(),\n            p0 = projection(c0),\n            p1 = projection(c1),\n            x10 = p1[0] - p0[0],\n            y10 = p1[1] - p0[1],\n            d1 = x10 * x10 + y10 * y10;\n        before.push(c0);\n        after.push(c0);\n\n        if (d1 > 4 * .1) {\n          // linear distance check\n          var c2 = d3.geoInterpolate(c0, c1)(.5),\n              p2 = projection(c2),\n              x20 = p2[0] - p0[0],\n              y20 = p2[1] - p0[1],\n              dz = y10 * x20 - x10 * y20;\n\n          if (dz * dz / d1 > .1) {\n            // perpendicular distance check\n            var t = (x20 * x10 + y20 * y10) / d1;\n            before.push(projection.invert(c2.resampled = [p0[0] + t * x10, p0[1] + t * y10]));\n            after.push(c2);\n          }\n        }\n      }\n\n      if (n) before.push(c1), after.push(c1);\n      return {\n        before: before,\n        after: after\n      };\n    };\n  });\n  main.variable(observer(\"drag\")).define(\"drag\", [\"versor\", \"d3\"], function (versor, d3) {\n    return function drag(projection) {\n      var v0, q0, r0;\n\n      function dragstarted() {\n        v0 = versor.cartesian(projection.invert(d3.mouse(this)));\n        q0 = versor(r0 = projection.rotate());\n      }\n\n      function dragged() {\n        var v1 = versor.cartesian(projection.rotate(r0).invert(d3.mouse(this)));\n        var q1 = versor.multiply(q0, versor.delta(v0, v1));\n        projection.rotate(versor.rotation(q1));\n      }\n\n      return d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged);\n    };\n  });\n  main.variable(observer(\"height\")).define(\"height\", [\"width\"], function (width) {\n    return width;\n  });\n  main.variable(observer(\"sphere\")).define(\"sphere\", function () {\n    return {\n      type: \"Sphere\"\n    };\n  });\n  main.variable(observer(\"land\")).define(\"land\", [\"topojson\", \"world\"], function (topojson, world) {\n    return topojson.feature(world, world.objects.land);\n  });\n  main.variable(observer(\"world\")).define(\"world\", [\"d3\"], function (d3) {\n    return d3.json(\"https://unpkg.com/world-atlas@1/world/110m.json\");\n  });\n  main.variable(observer(\"versor\")).define(\"versor\", [\"require\"], function (require) {\n    return require(\"versor@0.0.3\");\n  });\n  main.variable(observer(\"topojson\")).define(\"topojson\", [\"require\"], function (require) {\n    return require(\"topojson-client@3\");\n  });\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], function (require) {\n    return require(\"d3@5\");\n  });\n  main.variable(observer(\"routes_raw\")).define(\"routes_raw\", [\"d3\"], function (d3) {\n    return d3.csv(\"https://gist.githubusercontent.com/RobinL/ba3acbf42349115ed266a98643eb5a80/raw/a603b1fec071383d6a3eb27cbcda789c54cb0014/my_flights.csv\", d3.autoType);\n  });\n  main.variable(observer(\"routes\")).define(\"routes\", [\"routes_raw\"], function (routes_raw) {\n    return routes_raw.map(function (d) {\n      d[\"random\"] = (Math.random() - 0.5) * d[\"distance\"] / 1000;\n      return d;\n    });\n  });\n  return main;\n}","import React from 'react'\nimport define from \"@robinl/my-flights\"\nimport ObsMdxPage from \"../components/mdx_obs_page\"\n\nexport const frontmatter = {\n         title: \"My flights\",\n         post_date: \"2019-10-05\",\n         code_url: \"https://observablehq.com/@robinl/my-flights/\",\n         post_type: \"obs\",\n         post_category: \"energy\",\n         description: \"A history of my flights\"\n       }\n\nlet output_order = [\n    \"title\",\n    \"blurb\",\n    \"chart\"\n]\n\nexport default ({ data }) => (\n    <ObsMdxPage\n        define={define}\n        output_order={output_order}\n        post_frontmatter={frontmatter}/>\n\n)\n"],"sourceRoot":""}